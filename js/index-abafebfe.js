import{r as e,h as r,j as a}from"./react-1b56b61c.js";import{j as E,av as D,T as j,c as M,aw as G}from"./index-c941e042.js";import{C as R}from"./index-60fb63ca.js";import{d as T}from"./lodash-87ac67d6.js";import{I as U}from"./index-3f56dd29.js";import"./vendor-e7a31927.js";import"./react-router-dom-1f34616f.js";import"./react-redux-6f2a0ace.js";const O=()=>{const s=M("cloud-music"),[h,g]=e.exports.useReducer(b,[]),[,y]=e.exports.useState(0),[c,v]=e.exports.useState(0),[u,w]=e.exports.useState(0),[,x]=e.exports.useState(""),_=e.exports.useMemo(()=>c===0?0:u*100/c,[u,c]);let n=0;const d=30,i=e.exports.useRef(null),C=T(o=>{x(o.currentTarget.value)},500);async function m(){var f;const o=await G(n,d),{data:t,maxSize:l,size:S,count:F,hasMore:I}=o,B=n===0?"reset":"add",z=t.map(N=>N.simpleSong);g({type:B,payload:z}),v(p(l)),w(p(S)),y(F),(f=i.current)==null||f.call(i,I),n+=d}function b(o,t){return t.type==="add"?[...o,...t.payload]:t.payload}function p(o){try{let t=BigInt(o);const l=BigInt(1024);return t*=BigInt(10),t/=l**BigInt(3),Number(t)/10}catch(t){throw new Error(t)}}return e.exports.useEffect(()=>{m()},[]),r("div",{children:[r("header",{className:s("header"),children:[r("div",{className:s("capacity"),children:[a("span",{className:s("capacity-title"),children:"\u4E91\u76D8\u5BB9\u91CF"}),a("div",{className:s("ruler"),children:a("div",{style:{width:`${_}%`}})}),r("span",{className:s("capacity-ratio"),children:[u,"G/",c,"G"]}),a("span",{className:s("capacity-description"),children:"\u6B4C\u66F2\u6C38\u4E45\u4FDD\u5B58\uFF0C\u968F\u65F6\u968F\u5730\u591A\u7AEF\u7545\u542C"})]}),r("div",{className:s("control"),children:[a(E,{compose:!0}),a(D,{placeholder:"\u641C\u7D22\u4E91\u76D8\u97F3\u4E50",onInput:C})]})]}),a(j,{columns:R,data:h}),a(U,{ref:i,cb:m})]})};export{O as default};
