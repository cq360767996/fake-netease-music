import{d as b}from"./lodash-536b9069.js";import{r as e,g as r,j as s}from"./react-db2799b6.js";import{j,av as M,T as G,c as R,aw as T}from"./index-2448f94e.js";import{I as U}from"./index-cb31d04d.js";import{C as A}from"./index-c374ff2e.js";import"./vendor-da34c035.js";import"./react-redux-a59d985d.js";import"./react-router-dom-66f75ae1.js";const P=()=>{const a=R("cloud-music"),[f,x]=e.exports.useReducer(B,[]),[,y]=e.exports.useState(0),[c,C]=e.exports.useState(0),[u,S]=e.exports.useState(0),[,g]=e.exports.useState(""),F=e.exports.useMemo(()=>c===0?0:u*100/c,[u,c]);let i=0;const d=30,n=e.exports.useRef(null),I=b(o=>{g(o.currentTarget.value)},500);async function p(){var h;const o=await T(i,d),{data:t,maxSize:l,size:z,count:N,hasMore:v}=o,E=i===0?"reset":"add",w=t.map(D=>D.simpleSong);x({type:E,payload:w}),C(m(l)),S(m(z)),y(N),(h=n.current)==null||h.call(n,v),i+=d}function B(o,t){return t.type==="add"?[...o,...t.payload]:t.payload}function m(o){try{let t=BigInt(o);const l=BigInt(1024);return t*=BigInt(10),t/=l**BigInt(3),Number(t)/10}catch(t){throw new Error(t)}}return e.exports.useEffect(()=>{p()},[]),r("div",{children:[r("header",{className:a("header"),children:[r("div",{className:a("capacity"),children:[s("span",{className:a("capacity-title"),children:"\u4E91\u76D8\u5BB9\u91CF"}),s("div",{className:a("ruler"),children:s("div",{style:{width:`${F}%`}})}),r("span",{className:a("capacity-ratio"),children:[u,"G/",c,"G"]}),s("span",{className:a("capacity-description"),children:"\u6B4C\u66F2\u6C38\u4E45\u4FDD\u5B58\uFF0C\u968F\u65F6\u968F\u5730\u591A\u7AEF\u7545\u542C"})]}),r("div",{className:a("control"),children:[s(j,{compose:!0}),s(M,{placeholder:"\u641C\u7D22\u4E91\u76D8\u97F3\u4E50",onInput:I})]})]}),s(G,{columns:A,data:f}),s(U,{ref:n,cb:p})]})};export{P as default};
