import{m as b,P as D,ak as I,a2 as T}from"./vendor-ddfd0f27.js";import{j as e,r as i,u as y,g as u,n as E}from"./react-34ba0285.js";import{a as N}from"./react-redux-b094955d.js";import{c as x}from"./index-5d73d8ae.js";import{c as h,b as M,d as w,r as k,D as f,J as P,K as B,p as F,y as L,M as $,N as O,k as R}from"./index-74de2b4e.js";import"./lodash-536b9069.js";import"./react-router-dom-46eb6367.js";const C={"album-control":"_album-control_edfae_1","album-control__item":"_album-control__item_edfae_4","--active":"_--active_edfae_19"},q=({albumType:n,setAlbumType:o})=>{const s=h("album-control",C),t=[{text:"\u63A8\u8350",type:"hot"},{text:"\u5168\u90E8",type:"new"}];return e("div",{className:s(),children:t.map(c=>e("div",{className:s("item"),children:e("span",{className:b({[C["--active"]]:n===c.type}),onClick:()=>o(c.type),children:c.text})},c.text))})},z={"album-list":"_album-list_beldj_1","album-list__left":"_album-list__left_beldj_6","album-list__right":"_album-list__right_beldj_16","album-list__img":"_album-list__img_beldj_21","album-list__img-wrapper":"_album-list__img-wrapper_beldj_26","album-list__description":"_album-list__description_beldj_33","album-list__name":"_album-list__name_beldj_38","album-list__author":"_album-list__author_beldj_41"},H=({type:n,area:o})=>{const s=h("album-list",z),[t,c]=i.exports.useState(),r=N(),{push:p}=y(),a=i.exports.useMemo(()=>(t==null?void 0:t.weekData)||(t==null?void 0:t.monthData),[t]),g=i.exports.useMemo(()=>{var l;return!!((l=t==null?void 0:t.weekData)!=null&&l.length)},[t]);async function _(){const l=await B({area:o,type:n,limit:20});c(l)}return i.exports.useEffect(()=>(_(),M),[o,n]),u("div",{className:s(),children:[e("div",{className:s("left"),children:u("h2",{children:["\u672C",g?"\u5468":"\u6708","\u65B0\u789F"]})}),e("div",{className:s("right"),children:a==null?void 0:a.map(l=>u("div",{className:s("item"),children:[e("div",{className:s("img-wrapper"),children:e(w,{className:s("img"),src:k(l.picUrl,100),icon:{size:"big",hoverDisplay:!0},onClick:()=>p(f.list(l.id)),onIconClick:()=>r(P(l.id))})}),u("div",{className:s("description"),children:[e("div",{className:s("name"),children:l.name}),e("div",{className:s("author"),children:l.artist.name})]})]},l.id))})]})},U={"song-control":"_song-control_1uy4e_1","song-control__item":"_song-control__item_1uy4e_4"},G=({onPlayAll:n,onCollectAll:o})=>{const s=h("song-control",U),t=[{name:"\u64AD\u653E\u5168\u90E8",icon:D},{name:"\u6536\u85CF\u5168\u90E8",icon:I}];function c(r){r===0?n():o()}return e("div",{className:s(),children:t.map((r,p)=>u("div",{className:s("item"),onClick:()=>c(p),children:[e(r.icon,{}),r.name]},r.name))})},J={"song-list":"_song-list_1pg80_1","song-list__item":"_song-list__item_1pg80_4","song-list__left":"_song-list__left_1pg80_19","song-list__right":"_song-list__right_1pg80_23","song-list__ordinal":"_song-list__ordinal_1pg80_27","song-list__img":"_song-list__img_1pg80_32","song-list__img-wrapper":"_song-list__img-wrapper_1pg80_37","song-list__song":"_song-list__song_1pg80_42","song-list__author":"_song-list__author_1pg80_67","song-list__album":"_song-list__album_1pg80_73"},K=i.exports.forwardRef(({type:n},o)=>{const s=h("song-list",J),[t,c]=i.exports.useState([]),r=N();function p(a){r(L(a))}return i.exports.useEffect(()=>{if(n===void 0)return;let a=!1;async function g(){const _=await $(n);a||c(_.data)}return g(),()=>{a=!0}},[n]),i.exports.useImperativeHandle(o,()=>t,[t]),e("div",{className:s(),children:t.map((a,g)=>u("div",{className:s("item"),children:[u("div",{className:s("left"),children:[e("div",{className:s("ordinal"),children:g+1}),e("div",{className:s("img-wrapper"),children:e(w,{className:s("img"),src:k(a.album.picUrl,100),icon:!0,onClick:()=>p(a.id)})}),u("div",{className:s("song"),children:[e("p",{children:a.name}),e("small",{children:"SQ"}),e(T,{})]})]}),u("div",{className:s("right"),children:[e("div",{className:s("author"),children:a.album.artists.reduce((_,l)=>`${_}/${l.name}`,"").slice(1)}),e("div",{className:s("album"),children:a.album.name}),e("div",{className:s("duration"),children:F(a.duration)})]})]},a.id))})}),es=()=>{const n=h("newest"),[o,s]=i.exports.useState(0),[t,c]=i.exports.useState(0),r=i.exports.useMemo(()=>x[t],[t]),{push:p}=y(),{pathname:a}=E(),g=N(),_=i.exports.useRef([]),[l,A]=i.exports.useState("hot"),v=[{path:f.findMusicNewest(""),label:"\u65B0\u6B4C\u901F\u9012"},{path:f.findMusicNewest("album"),label:"\u65B0\u789F\u4E0A\u67B6"}];function S(){}function j(){if(!(_!=null&&_.current))return;const m={tracks:_.current.map(O),current:0,fm:[]};g(R(m))}return i.exports.useEffect(()=>{const d=v.findIndex(m=>m.path===a);d>-1&&s(d)},[a]),u("div",{className:n(),children:[e("header",{className:n("switch"),children:v.map((d,m)=>e("div",{className:b("newest__switch-item",{["--active"]:o===m}),onClick:()=>{p(d.path),s(m)},children:d.label},m))}),u("div",{className:n("control"),children:[e("div",{children:x.slice(0,-1).map((d,m)=>e("span",{className:b("newest__category",{["--active"]:t===m}),onClick:()=>c(m),children:d.name},d.area))}),o?e(q,{albumType:l,setAlbumType:A}):e(G,{onCollectAll:S,onPlayAll:j})]}),o?e(H,{type:l,area:r.albumArea}):e(K,{ref:_,type:r.type})]})};export{es as default};
