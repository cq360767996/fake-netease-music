import{r as e,h as o,j as s}from"./react-d9689425.js";import{j as b,av as j,T as M,c as G,aw as R}from"./index-c34386fa.js";import{C as T}from"./index-964a4302.js";import{d as U}from"./lodash-87ac67d6.js";import{I as A}from"./index-b5c86e7c.js";import"./vendor-448858a9.js";import"./react-router-dom-94468eab.js";import"./react-redux-ace978cf.js";const P=()=>{const a=G("cloud-music"),[f,x]=e.exports.useReducer(B,[]),[,y]=e.exports.useState(0),[c,C]=e.exports.useState(0),[u,S]=e.exports.useState(0),[,F]=e.exports.useState(""),I=e.exports.useMemo(()=>c===0?0:u*100/c,[u,c]);let i=0;const d=30,n=e.exports.useRef(null),g=U(r=>{F(r.currentTarget.value)},500);async function p(){var h;const r=await R(i,d),{data:t,maxSize:l,size:v,count:z,hasMore:N}=r,E=i===0?"reset":"add",w=t.map(D=>D.simpleSong);x({type:E,payload:w}),C(m(l)),S(m(v)),y(z),(h=n.current)==null||h.call(n,N),i+=d}function B(r,t){return t.type==="add"?[...r,...t.payload]:t.payload}function m(r){try{let t=BigInt(r);const l=BigInt(1024);return t*=BigInt(10),t/=l**BigInt(3),Number(t)/10}catch(t){throw new Error(t)}}return e.exports.useEffect(()=>{p()},[]),o("div",{children:[o("header",{className:a("header"),children:[o("div",{className:a("capacity"),children:[s("span",{className:a("capacity-title"),children:"\u4E91\u76D8\u5BB9\u91CF"}),s("div",{className:a("ruler"),children:s("div",{style:{width:`${I}%`}})}),o("span",{className:a("capacity-ratio"),children:[u,"G/",c,"G"]}),s("span",{className:a("capacity-description"),children:"\u6B4C\u66F2\u6C38\u4E45\u4FDD\u5B58\uFF0C\u968F\u65F6\u968F\u5730\u591A\u7AEF\u7545\u542C"})]}),o("div",{className:a("control"),children:[s(b,{compose:!0}),s(j,{placeholder:"\u641C\u7D22\u4E91\u76D8\u97F3\u4E50",onInput:g})]})]}),s(M,{columns:T,data:f}),s(A,{ref:n,cb:p})]})};export{P as default};
