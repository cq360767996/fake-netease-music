import{r as i,j as s,h as u,u as y,k as D}from"./react-1b56b61c.js";import{u as I,J as T,ak as E,k as b}from"./vendor-e7a31927.js";import{c as N}from"./index-60fb63ca.js";import{d as C,r as k,p as M,c as h,x as B,J as F,b as L,D as v,K as P,M as $,N as O,k as R}from"./index-c941e042.js";import{u as f}from"./react-redux-6f2a0ace.js";import"./lodash-87ac67d6.js";import"./react-router-dom-1f34616f.js";var q={"song-list":"_song-list_1pg80_1","song-list__item":"_song-list__item_1pg80_4","song-list__left":"_song-list__left_1pg80_19","song-list__right":"_song-list__right_1pg80_23","song-list__ordinal":"_song-list__ordinal_1pg80_27","song-list__img":"_song-list__img_1pg80_32","song-list__img-wrapper":"_song-list__img-wrapper_1pg80_37","song-list__song":"_song-list__song_1pg80_42","song-list__author":"_song-list__author_1pg80_67","song-list__album":"_song-list__album_1pg80_73"};const z=i.exports.forwardRef(({type:n},r)=>{const e=h("song-list",q),[t,o]=i.exports.useState([]),c=f();function g(a){c(B(a))}return i.exports.useEffect(()=>{if(n===void 0)return;let a=!1;async function p(){const _=await F(n);a||o(_.data)}return p(),()=>{a=!0}},[n]),i.exports.useImperativeHandle(r,()=>t,[t]),s("div",{className:e(),children:t.map((a,p)=>u("div",{className:e("item"),children:[u("div",{className:e("left"),children:[s("div",{className:e("ordinal"),children:p+1}),s("div",{className:e("img-wrapper"),children:s(C,{className:e("img"),src:k(a.album.picUrl,100),icon:!0,onClick:()=>g(a.id)})}),u("div",{className:e("song"),children:[s("p",{children:a.name}),s("small",{children:"SQ"}),s(I,{})]})]}),u("div",{className:e("right"),children:[s("div",{className:e("author"),children:a.album.artists.reduce((_,l)=>`${_}/${l.name}`,"").slice(1)}),s("div",{className:e("album"),children:a.album.name}),s("div",{className:e("duration"),children:M(a.duration)})]})]},a.id))})});var H={"album-list":"_album-list_beldj_1","album-list__left":"_album-list__left_beldj_6","album-list__right":"_album-list__right_beldj_16","album-list__img":"_album-list__img_beldj_21","album-list__img-wrapper":"_album-list__img-wrapper_beldj_26","album-list__description":"_album-list__description_beldj_33","album-list__name":"_album-list__name_beldj_38","album-list__author":"_album-list__author_beldj_41"};const J=({type:n,area:r})=>{const e=h("album-list",H),[t,o]=i.exports.useState(),c=f(),{push:g}=y(),a=i.exports.useMemo(()=>(t==null?void 0:t.weekData)||(t==null?void 0:t.monthData),[t]),p=i.exports.useMemo(()=>{var l;return!!((l=t==null?void 0:t.weekData)!=null&&l.length)},[t]);async function _(){const l=await $({area:r,type:n,limit:20});o(l)}return i.exports.useEffect(()=>(_(),L),[r,n]),u("div",{className:e(),children:[s("div",{className:e("left"),children:u("h2",{children:["\u672C",p?"\u5468":"\u6708","\u65B0\u789F"]})}),s("div",{className:e("right"),children:a==null?void 0:a.map(l=>u("div",{className:e("item"),children:[s("div",{className:e("img-wrapper"),children:s(C,{className:e("img"),src:k(l.picUrl,100),icon:{size:"big",hoverDisplay:!0},onClick:()=>g(v.list(l.id)),onIconClick:()=>c(P(l.id))})}),u("div",{className:e("description"),children:[s("div",{className:e("name"),children:l.name}),s("div",{className:e("author"),children:l.artist.name})]})]},l.id))})]})};var U={"song-control":"_song-control_1uy4e_1","song-control__item":"_song-control__item_1uy4e_4"};const G=({onPlayAll:n,onCollectAll:r})=>{const e=h("song-control",U),t=[{name:"\u64AD\u653E\u5168\u90E8",icon:T},{name:"\u6536\u85CF\u5168\u90E8",icon:E}];function o(c){c===0?n():r()}return s("div",{className:e(),children:t.map((c,g)=>u("div",{className:e("item"),onClick:()=>o(g),children:[s(c.icon,{}),c.name]},c.name))})};var x={"album-control":"_album-control_edfae_1","album-control__item":"_album-control__item_edfae_4","--active":"_--active_edfae_19"};const K=({albumType:n,setAlbumType:r})=>{const e=h("album-control",x),t=[{text:"\u63A8\u8350",type:"hot"},{text:"\u5168\u90E8",type:"new"}];return s("div",{className:e(),children:t.map(o=>s("div",{className:e("item"),children:s("span",{className:b({[x["--active"]]:n===o.type}),onClick:()=>r(o.type),children:o.text})},o.text))})},se=()=>{const n=h("newest"),[r,e]=i.exports.useState(0),[t,o]=i.exports.useState(0),c=i.exports.useMemo(()=>N[t],[t]),{push:g}=y(),{pathname:a}=D(),p=f(),_=i.exports.useRef([]),[l,A]=i.exports.useState("hot"),w=[{path:v.findMusicNewest(""),label:"\u65B0\u6B4C\u901F\u9012"},{path:v.findMusicNewest("album"),label:"\u65B0\u789F\u4E0A\u67B6"}];function S(){}function j(){if(!(_!=null&&_.current))return;const m={tracks:_.current.map(O),current:0,fm:[]};p(R(m))}return i.exports.useEffect(()=>{const d=w.findIndex(m=>m.path===a);d>-1&&e(d)},[a]),u("div",{className:n(),children:[s("header",{className:n("switch"),children:w.map((d,m)=>s("div",{className:b("newest__switch-item",{["--active"]:r===m}),onClick:()=>{g(d.path),e(m)},children:d.label},m))}),u("div",{className:n("control"),children:[s("div",{children:N.slice(0,-1).map((d,m)=>s("span",{className:b("newest__category",{["--active"]:t===m}),onClick:()=>o(m),children:d.name},d.area))}),r?s(K,{albumType:l,setAlbumType:A}):s(G,{onCollectAll:S,onPlayAll:j})]}),r?s(J,{type:l,area:c.albumArea}):s(z,{ref:_,type:c.type})]})};export{se as default};
