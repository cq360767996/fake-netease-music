import{r,g as o,F as U,j as t,u as A}from"./react-612bda17.js";import{ae as D,b as L,V as O,af as j,D as I,t as z,r as M,d as B,c as S,K as F,ag as G}from"./index-d45ba440.js";import{ad as H,aw as R,k as P,U as K,ax as V}from"./vendor-7f089e7e.js";import{P as q}from"./index-f778d8dc.js";import{u as J}from"./react-redux-aeaeff1e.js";import"./lodash-87ac67d6.js";import"./react-router-dom-7eed272f.js";const Q=()=>{const[s,v]=r.exports.useState([]),[C,y]=r.exports.useState(),[m,l]=r.exports.useState(0),[x,p]=r.exports.useState(1),[a,n]=r.exports.useState("\u5168\u90E8");function d(u){return u.map(f=>{const{id:_,name:g,coverImgUrl:k}=f;return{id:_,name:g,imgUrl:k}})}async function c(u=1,f=100){const _=(u-1)*f,g=await D({cat:a,offset:_,limit:f});v(d(g.playlists)),l(g.total)}async function h(){const u=await O(a);y(u.playlists[0])}return r.exports.useEffect(()=>(p(1),c(),h(),L),[a]),{topPlaylist:s,total:m,current:x,setCurrent:p,loadTopPlaylist:c,topPlaylistHighquality:C,cat:a,setCat:n}};function W(s){const[v,C]=r.exports.useState([]),y=o(U,{children:[s==="\u5168\u90E8"?"\u5168\u90E8\u6B4C\u5355":s,t(H,{})]});async function m(){const l=await j(),x=Object.keys(l.categories).map(p=>{const a=l.categories[p],n=[],d=Number(p),c={data:n,name:a};return l.sub.forEach(h=>{h.category===d&&c.data.push(h)}),c});C(x)}return r.exports.useEffect(()=>{m()},[]),{buttonContext:y,allMusicCategory:v}}const X="_popover_1ff6m_1",Y="_popover__header_1ff6m_4",Z="_popover__item_1ff6m_27",$="_popover__left_1ff6m_35",ee="_popover__right_1ff6m_43",te="_popover__label_1ff6m_48";var E={popover:X,popover__header:Y,"--active":"_--active_1ff6m_19",popover__item:Z,popover__left:$,popover__right:ee,popover__label:te};const le=()=>{const s=S("music-list"),[v,C]=r.exports.useState([]),{topPlaylist:y,total:m,current:l,setCurrent:x,loadTopPlaylist:p,topPlaylistHighquality:a,cat:n,setCat:d}=Q(),{push:c}=A(),h=J(),{buttonContext:u,allMusicCategory:f}=W(n);function _(e){c(I.list(e))}function g(e){h(F(e))}function k(e){const i=S("popover",E);function T(N){d(N),e(!1)}return o("div",{className:i(),children:[t("header",{className:i("header"),children:t("button",{className:P({[E["--active"]]:n==="\u5168\u90E8"}),onClick:()=>T("\u5168\u90E8"),children:"\u5168\u90E8\u6B4C\u5355"})}),f.map(N=>o("section",{className:i("item"),children:[o("div",{className:i("left"),children:[t(V,{}),t("span",{children:N.name})]}),t("div",{className:i("right"),children:N.data.map(b=>o("div",{className:P(i("label"),{[E["--active"]]:b.name===n}),onClick:()=>T(b.name),children:[t("span",{children:b.name}),b.hot&&t("strong",{children:"HOT"})]},b.name))})]},N.name))]})}async function w(){const e=await G();C(e.tags)}return r.exports.useEffect(()=>{w()},[]),o("div",{className:s(),children:[o("header",{className:s("banner"),onClick:()=>c(I.excellentList(n)),children:[(a==null?void 0:a.coverImgUrl)&&t("img",{src:z(M(a.coverImgUrl,300)),alt:"banner"}),o("div",{className:s("banner-right"),children:[o("button",{children:[t(R,{})," \u7CBE\u54C1\u6B4C\u5355"]}),t("h2",{children:a==null?void 0:a.name}),t("h3",{children:a==null?void 0:a.copywriter})]})]}),o("section",{className:s("guide"),children:[t(q,{context:u,functionChildren:k}),t("ul",{children:v.map(e=>t("li",{className:P({"--active":e.name===n}),onClick:()=>d(e.name),children:e.name},e.id))})]}),t("section",{className:s("card"),children:y.map(e=>o("div",{className:s("item"),children:[t(B,{className:s("img"),src:M(e.imgUrl),icon:{size:"big",hoverDisplay:!0,placement:"bottom"},onClick:()=>_(e.id),onIconClick:()=>g(e.id)}),t("p",{onClick:()=>_(e.id),children:e.name})]},e.id))}),t("footer",{className:s("footer"),children:m>0?t(K,{current:l,total:m,onChange:(e,i)=>{x(e),p(e,i)},pageSize:100,showSizeChanger:!1}):null})]})};export{le as default};
