import{ad as A,aw as D,m as k,x as L,ax as O}from"./vendor-ddfd0f27.js";import{r,g as o,F as U,j as t,u as j}from"./react-34ba0285.js";import{a as z}from"./react-redux-b094955d.js";import{b as B,ae as F,V as G,af as H,D as I,t as R,r as M,d as J,c as S,J as V,ag as q}from"./index-74de2b4e.js";import{P as K}from"./index-67b37114.js";import"./lodash-536b9069.js";import"./react-router-dom-46eb6367.js";const Q=()=>{const[a,C]=r.exports.useState([]),[v,y]=r.exports.useState(),[m,l]=r.exports.useState(0),[x,p]=r.exports.useState(1),[s,n]=r.exports.useState("\u5168\u90E8");function d(u){return u.map(f=>{const{id:_,name:g,coverImgUrl:P}=f;return{id:_,name:g,imgUrl:P}})}async function c(u=1,f=100){const _=(u-1)*f,g=await F({cat:s,offset:_,limit:f});C(d(g.playlists)),l(g.total)}async function h(){const u=await G(s);y(u.playlists[0])}return r.exports.useEffect(()=>(p(1),c(),h(),B),[s]),{topPlaylist:a,total:m,current:x,setCurrent:p,loadTopPlaylist:c,topPlaylistHighquality:v,cat:s,setCat:n}};function W(a){const[C,v]=r.exports.useState([]),y=o(U,{children:[a==="\u5168\u90E8"?"\u5168\u90E8\u6B4C\u5355":a,t(A,{})]});async function m(){const l=await H(),x=Object.keys(l.categories).map(p=>{const s=l.categories[p],n=[],d=Number(p),c={data:n,name:s};return l.sub.forEach(h=>{h.category===d&&c.data.push(h)}),c});v(x)}return r.exports.useEffect(()=>{m()},[]),{buttonContext:y,allMusicCategory:C}}const X="_popover_1ff6m_1",Y="_popover__header_1ff6m_4",Z="_popover__item_1ff6m_27",$="_popover__left_1ff6m_35",ee="_popover__right_1ff6m_43",te="_popover__label_1ff6m_48",E={popover:X,popover__header:Y,"--active":"_--active_1ff6m_19",popover__item:Z,popover__left:$,popover__right:ee,popover__label:te},le=()=>{const a=S("music-list"),[C,v]=r.exports.useState([]),{topPlaylist:y,total:m,current:l,setCurrent:x,loadTopPlaylist:p,topPlaylistHighquality:s,cat:n,setCat:d}=Q(),{push:c}=j(),h=z(),{buttonContext:u,allMusicCategory:f}=W(n);function _(e){c(I.list(e))}function g(e){h(V(e))}function P(e){const i=S("popover",E);function T(N){d(N),e(!1)}return o("div",{className:i(),children:[t("header",{className:i("header"),children:t("button",{className:k({[E["--active"]]:n==="\u5168\u90E8"}),onClick:()=>T("\u5168\u90E8"),children:"\u5168\u90E8\u6B4C\u5355"})}),f.map(N=>o("section",{className:i("item"),children:[o("div",{className:i("left"),children:[t(O,{}),t("span",{children:N.name})]}),t("div",{className:i("right"),children:N.data.map(b=>o("div",{className:k(i("label"),{[E["--active"]]:b.name===n}),onClick:()=>T(b.name),children:[t("span",{children:b.name}),b.hot&&t("strong",{children:"HOT"})]},b.name))})]},N.name))]})}async function w(){const e=await q();v(e.tags)}return r.exports.useEffect(()=>{w()},[]),o("div",{className:a(),children:[o("header",{className:a("banner"),onClick:()=>c(I.excellentList(n)),children:[(s==null?void 0:s.coverImgUrl)&&t("img",{src:R(M(s.coverImgUrl,300)),alt:"banner"}),o("div",{className:a("banner-right"),children:[o("button",{children:[t(D,{})," \u7CBE\u54C1\u6B4C\u5355"]}),t("h2",{children:s==null?void 0:s.name}),t("h3",{children:s==null?void 0:s.copywriter})]})]}),o("section",{className:a("guide"),children:[t(K,{context:u,functionChildren:P}),t("ul",{children:C.map(e=>t("li",{className:k({"--active":e.name===n}),onClick:()=>d(e.name),children:e.name},e.id))})]}),t("section",{className:a("card"),children:y.map(e=>o("div",{className:a("item"),children:[t(J,{className:a("img"),src:M(e.imgUrl),icon:{size:"big",hoverDisplay:!0,placement:"bottom"},onClick:()=>_(e.id),onIconClick:()=>g(e.id)}),t("p",{onClick:()=>_(e.id),children:e.name})]},e.id))}),t("footer",{className:a("footer"),children:m>0?t(L,{current:l,total:m,onChange:(e,i)=>{x(e),p(e,i)},pageSize:100,showSizeChanger:!1}):null})]})};export{le as default};
