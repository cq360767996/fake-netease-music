import{u as g,g as n,F as T,j as s,r as o,t as B}from"./react-34ba0285.js";import{a as D}from"./react-redux-b094955d.js";import{c as v,D as x,d as H,r as j,J as q,U as R,V as w}from"./index-01b98e4e.js";import{I as F}from"./index-182d61e7.js";import{P as S}from"./index-f2caed72.js";import{au as O,m as y,av as U}from"./vendor-ddfd0f27.js";import"./lodash-536b9069.js";import"./react-router-dom-46eb6367.js";function z(a,r){const l=v("excellent"),{push:i}=g(),p=n(T,{children:[s(O,{}),"\u7B5B\u9009"]});function d(t){t!==r&&i(x.excellentList(t))}function c(){return n("div",{className:l("popover"),children:[s("header",{className:l("popover-header"),children:s("span",{className:y({"--active":r==="\u5168\u90E8"}),onClick:()=>d("\u5168\u90E8"),children:"\u5168\u90E8\u6B4C\u5355"})}),s("section",{className:l("popover-card"),children:a.map(t=>s("div",{children:s("span",{className:y({"--active":t.name===r}),onClick:()=>d(t.name),children:t.name})},t.id))})]})}return{buttonContext:p,renderPopover:c}}const X=()=>{const a=v("excellent"),[r,l]=o.exports.useState([]),i=B().id,[p,d]=o.exports.useReducer(E,[]),c=o.exports.useRef(null),{push:t}=g(),C=D(),m=o.exports.useRef(),N=10,{buttonContext:P,renderPopover:k}=z(r,i);async function I(){const e=await R();l(e.tags)}async function b(){var u;const e=await w(i,N,m.current),h=m.current===void 0?"reset":"add";d({type:h,payload:e.playlists}),m.current=e.lasttime,e.lasttime||(u=c.current)==null||u.call(c,!1)}function E(e,h){const{type:u,payload:f}=h;return u==="add"?[...e,...f]:f}return o.exports.useEffect(()=>{I()},[]),n("div",{className:a(),children:[n("header",{className:a("control"),children:[n("div",{className:a("control-title"),children:["\u7CBE\u54C1\u6B4C\u5355 ",s(U,{})]}),s(S,{className:a("control-pick"),placement:"right",context:P,functionChildren:k})]}),s("div",{className:a("card"),children:p.map(e=>n("div",{className:a("item"),children:[s(H,{className:a("img"),icon:{hoverDisplay:!0,placement:"bottom"},src:j(e.coverImgUrl,150),onClick:()=>t(x.list(e.id)),onIconClick:()=>C(q(e.id))}),n("div",{className:a("right"),children:[s("h3",{children:e.name}),n("small",{children:["by ",e.creator.nickname]}),n("div",{className:a("description"),children:[s("span",{children:e.tags.join(",")})," ",e.copywriter]})]})]},e.id))}),s(F,{ref:c,cb:b})]})};export{X as default};
