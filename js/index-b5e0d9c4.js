import{r as i,j as e,g as u,u as y,h as D}from"./react-612bda17.js";import{v as I,J as T,ak as E,k as b}from"./vendor-7f089e7e.js";import{c as x}from"./index-63f6f480.js";import{d as w,r as k,p as M,c as h,x as B,J as F,b as L,D as f,K as P,M as $,N as O,k as R}from"./index-d45ba440.js";import{u as v}from"./react-redux-aeaeff1e.js";import"./lodash-87ac67d6.js";import"./react-router-dom-7eed272f.js";var q={"song-list":"_song-list_1pg80_1","song-list__item":"_song-list__item_1pg80_4","song-list__left":"_song-list__left_1pg80_19","song-list__right":"_song-list__right_1pg80_23","song-list__ordinal":"_song-list__ordinal_1pg80_27","song-list__img":"_song-list__img_1pg80_32","song-list__img-wrapper":"_song-list__img-wrapper_1pg80_37","song-list__song":"_song-list__song_1pg80_42","song-list__author":"_song-list__author_1pg80_67","song-list__album":"_song-list__album_1pg80_73"};const z=i.exports.forwardRef(({type:n},r)=>{const s=h("song-list",q),[t,o]=i.exports.useState([]),c=v();function p(a){c(B(a))}return i.exports.useEffect(()=>{if(n===void 0)return;let a=!1;async function g(){const _=await F(n);a||o(_.data)}return g(),()=>{a=!0}},[n]),i.exports.useImperativeHandle(r,()=>t,[t]),e("div",{className:s(),children:t.map((a,g)=>u("div",{className:s("item"),children:[u("div",{className:s("left"),children:[e("div",{className:s("ordinal"),children:g+1}),e("div",{className:s("img-wrapper"),children:e(w,{className:s("img"),src:k(a.album.picUrl,100),icon:!0,onClick:()=>p(a.id)})}),u("div",{className:s("song"),children:[e("p",{children:a.name}),e("small",{children:"SQ"}),e(I,{})]})]}),u("div",{className:s("right"),children:[e("div",{className:s("author"),children:a.album.artists.reduce((_,l)=>`${_}/${l.name}`,"").slice(1)}),e("div",{className:s("album"),children:a.album.name}),e("div",{className:s("duration"),children:M(a.duration)})]})]},a.id))})});var H={"album-list":"_album-list_beldj_1","album-list__left":"_album-list__left_beldj_6","album-list__right":"_album-list__right_beldj_16","album-list__img":"_album-list__img_beldj_21","album-list__img-wrapper":"_album-list__img-wrapper_beldj_26","album-list__description":"_album-list__description_beldj_33","album-list__name":"_album-list__name_beldj_38","album-list__author":"_album-list__author_beldj_41"};const J=({type:n,area:r})=>{const s=h("album-list",H),[t,o]=i.exports.useState(),c=v(),{push:p}=y(),a=i.exports.useMemo(()=>(t==null?void 0:t.weekData)||(t==null?void 0:t.monthData),[t]),g=i.exports.useMemo(()=>{var l;return!!((l=t==null?void 0:t.weekData)!=null&&l.length)},[t]);async function _(){const l=await $({area:r,type:n,limit:20});o(l)}return i.exports.useEffect(()=>(_(),L),[r,n]),u("div",{className:s(),children:[e("div",{className:s("left"),children:u("h2",{children:["\u672C",g?"\u5468":"\u6708","\u65B0\u789F"]})}),e("div",{className:s("right"),children:a==null?void 0:a.map(l=>u("div",{className:s("item"),children:[e("div",{className:s("img-wrapper"),children:e(w,{className:s("img"),src:k(l.picUrl,100),icon:{size:"big",hoverDisplay:!0},onClick:()=>p(f.list(l.id)),onIconClick:()=>c(P(l.id))})}),u("div",{className:s("description"),children:[e("div",{className:s("name"),children:l.name}),e("div",{className:s("author"),children:l.artist.name})]})]},l.id))})]})};var U={"song-control":"_song-control_1uy4e_1","song-control__item":"_song-control__item_1uy4e_4"};const G=({onPlayAll:n,onCollectAll:r})=>{const s=h("song-control",U),t=[{name:"\u64AD\u653E\u5168\u90E8",icon:T},{name:"\u6536\u85CF\u5168\u90E8",icon:E}];function o(c){c===0?n():r()}return e("div",{className:s(),children:t.map((c,p)=>u("div",{className:s("item"),onClick:()=>o(p),children:[e(c.icon,{}),c.name]},c.name))})};var C={"album-control":"_album-control_edfae_1","album-control__item":"_album-control__item_edfae_4","--active":"_--active_edfae_19"};const K=({albumType:n,setAlbumType:r})=>{const s=h("album-control",C),t=[{text:"\u63A8\u8350",type:"hot"},{text:"\u5168\u90E8",type:"new"}];return e("div",{className:s(),children:t.map(o=>e("div",{className:s("item"),children:e("span",{className:b({[C["--active"]]:n===o.type}),onClick:()=>r(o.type),children:o.text})},o.text))})},es=()=>{const n=h("newest"),[r,s]=i.exports.useState(0),[t,o]=i.exports.useState(0),c=i.exports.useMemo(()=>x[t],[t]),{push:p}=y(),{pathname:a}=D(),g=v(),_=i.exports.useRef([]),[l,A]=i.exports.useState("hot"),N=[{path:f.findMusicNewest(""),label:"\u65B0\u6B4C\u901F\u9012"},{path:f.findMusicNewest("album"),label:"\u65B0\u789F\u4E0A\u67B6"}];function S(){}function j(){if(!(_!=null&&_.current))return;const m={tracks:_.current.map(O),current:0,fm:[]};g(R(m))}return i.exports.useEffect(()=>{const d=N.findIndex(m=>m.path===a);d>-1&&s(d)},[a]),u("div",{className:n(),children:[e("header",{className:n("switch"),children:N.map((d,m)=>e("div",{className:b("newest__switch-item",{["--active"]:r===m}),onClick:()=>{p(d.path),s(m)},children:d.label},m))}),u("div",{className:n("control"),children:[e("div",{children:x.slice(0,-1).map((d,m)=>e("span",{className:b("newest__category",{["--active"]:t===m}),onClick:()=>o(m),children:d.name},d.area))}),r?e(K,{albumType:l,setAlbumType:A}):e(G,{onCollectAll:S,onPlayAll:j})]}),r?e(J,{type:l,area:c.albumArea}):e(z,{ref:_,type:c.type})]})};export{es as default};
