var j=Object.defineProperty,z=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var g=(i,s,a)=>s in i?j(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,N=(i,s)=>{for(var a in s||(s={}))k.call(s,a)&&g(i,a,s[a]);if(_)for(var a of _(s))v.call(s,a)&&g(i,a,s[a]);return i},y=(i,s)=>z(i,B(s));var C=(i,s)=>{var a={};for(var l in i)k.call(i,l)&&s.indexOf(l)<0&&(a[l]=i[l]);if(i!=null&&_)for(var l of _(i))s.indexOf(l)<0&&v.call(i,l)&&(a[l]=i[l]);return a};import{g as t,j as c,r as m,u as E}from"./react-612bda17.js";import{d as D,r as x,c as I,D as h,K as S,k as A,ak as U,o as $}from"./index-d45ba440.js";import{u as G}from"./react-redux-aeaeff1e.js";import"./vendor-7f089e7e.js";import"./lodash-87ac67d6.js";import"./react-router-dom-7eed272f.js";const H="_official_s160o_1",K="_official__left_s160o_5",O="_official__img_s160o_11",R="_official__right_s160o_16",V="_official__item_s160o_20",q="_official__all_s160o_65";var F={official:H,official__left:K,official__img:O,official__right:R,official__item:V,"official__item-left":"_official__item-left_s160o_43","official__item-right":"_official__item-right_s160o_55",official__all:q};const J=({data:i,onItemClick:s,onViewAll:a})=>{const l=I("official",F);return t("div",{className:l(),children:[c("div",{className:l("left"),children:c(D,{className:l("img"),src:x(i.coverImgUrl),icon:{size:"big",hoverDisplay:!0},onClick:()=>s(i.tracks,0),onIconClick:()=>s(i.tracks,0)})}),t("div",{className:l("right"),children:[c("ul",{children:i.tracks.map((o,r)=>t("li",{className:l("item"),onClick:()=>s(i.tracks,r),children:[t("div",{className:l("item-left"),children:[c("strong",{children:r+1}),c("div",{children:c("span",{children:"-"})}),c("span",{children:o.name})]}),c("div",{className:l("item-right"),children:o.ar.reduce((n,d)=>`${n}/${d.name}`,"").slice(1)})]},o.id))}),c("div",{className:l("all"),onClick:()=>a(i.id),children:"\u67E5\u770B\u5168\u90E8 >"})]})]})},si=()=>{const i=I("rank"),[s,a]=m.exports.useState([]),[l,o]=m.exports.useState([]),r=G(),{push:n}=E();function d(e,f){r(A({current:f,tracks:e,fm:[]}))}async function w(){const e=await U();a(e.list);const f=e.list.slice(0,5),p=[];for(const P of f){const u=(await $(P.id)).playlist,{tracks:T}=u,b=C(u,["tracks"]);p.push(y(N({},b),{tracks:T.slice(0,5)}))}o(p)}return m.exports.useEffect(()=>{w()},[]),t("div",{className:i(),children:[c("header",{className:i("header"),children:"\u5B98\u65B9\u699C"}),c("div",{className:i("official"),children:l.map(e=>c(J,{data:e,onItemClick:d,onViewAll:f=>n(h.list(f))},e.id))}),c("header",{className:i("header"),children:"\u5168\u7403\u699C"}),c("div",{className:i("global"),children:s.map(e=>t("div",{className:i("item"),children:[c("div",{className:i("img-wrapper"),children:c(D,{className:i("img"),src:x(e.coverImgUrl),icon:{size:"big",hoverDisplay:!0},onClick:()=>n(h.list(e.id)),onIconClick:()=>r(S(e.id))})}),c("div",{className:i("detail"),onClick:()=>n(h.list(e.id)),children:e.name})]},e.id))})]})};export{si as default};
