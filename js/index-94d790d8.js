import{r as o,h as a,F as z,j as t,u as j}from"./react-1b56b61c.js";import{ae as U,b as A,V as D,af as L,D as T,t as O,r as I,d as B,c as M,K as F,ag as G}from"./index-c941e042.js";import{ad as H,aw as R,k,U as K,ax as V}from"./vendor-e7a31927.js";import{P as q}from"./index-e8f2774d.js";import{u as J}from"./react-redux-6f2a0ace.js";import"./lodash-87ac67d6.js";import"./react-router-dom-1f34616f.js";const Q=()=>{const[r,h]=o.exports.useState([]),[w,b]=o.exports.useState(),[p,l]=o.exports.useState(0),[C,u]=o.exports.useState(1),[s,i]=o.exports.useState("\u5168\u90E8");function m(d){return d.map(g=>{const{id:f,name:v,coverImgUrl:N}=g;return{id:f,name:v,imgUrl:N}})}async function n(d=1,g=100){const f=(d-1)*g,v=await U({cat:s,offset:f,limit:g});h(m(v.playlists)),l(v.total)}async function _(){const d=await D(s);b(d.playlists[0])}return o.exports.useEffect(()=>(u(1),n(),_(),A),[s]),{topPlaylist:r,total:p,current:C,setCurrent:u,loadTopPlaylist:n,topPlaylistHighquality:w,cat:s,setCat:i}};function W(r){const[h,w]=o.exports.useState([]),b=a(z,{children:[r==="\u5168\u90E8"?"\u5168\u90E8\u6B4C\u5355":r,t(H,{})]});async function p(){const l=await L(),C=Object.keys(l.categories).map(u=>{const s=l.categories[u],i=[],m=Number(u),n={data:i,name:s};return l.sub.forEach(_=>{_.category===m&&n.data.push(_)}),n});w(C)}return o.exports.useEffect(()=>{p()},[]),{buttonContext:b,allMusicCategory:h}}const X="_popover_1ff6m_1",Y="_popover__header_1ff6m_4",Z="_popover__item_1ff6m_27",$="_popover__left_1ff6m_35",ee="_popover__right_1ff6m_43",te="_popover__label_1ff6m_48";var P={popover:X,popover__header:Y,"--active":"_--active_1ff6m_19",popover__item:Z,popover__left:$,popover__right:ee,popover__label:te};const le=()=>{const r=M("music-list"),[h,w]=o.exports.useState([]),{topPlaylist:b,total:p,current:l,setCurrent:C,loadTopPlaylist:u,topPlaylistHighquality:s,cat:i,setCat:m}=Q(),{push:n}=j(),_=J(),{buttonContext:d,allMusicCategory:g}=W(i);function f(e){n(T.list(e))}function v(e){_(F(e))}function N(e){const c=M("popover",P);function E(y){m(y),e(!1)}return a("div",{className:c(),children:[t("header",{className:c("header"),children:t("button",{className:k({[P["--active"]]:i==="\u5168\u90E8"}),onClick:()=>E("\u5168\u90E8"),children:"\u5168\u90E8\u6B4C\u5355"})}),g.map(y=>a("section",{className:c("item"),children:[a("div",{className:c("left"),children:[t(V,{}),t("span",{children:y.name})]}),t("div",{className:c("right"),children:y.data.map(x=>a("div",{className:k(c("label"),{[P["--active"]]:x.name===i}),onClick:()=>E(x.name),children:[t("span",{children:x.name}),x.hot&&t("strong",{children:"HOT"})]},x.name))})]},y.name))]})}async function S(){const e=await G();w(e.tags)}return o.exports.useEffect(()=>{S()},[]),a("div",{className:r(),children:[a("header",{className:r("banner"),onClick:()=>n(T.excellentList(i)),children:[(s==null?void 0:s.coverImgUrl)&&t("img",{src:O(I(s.coverImgUrl,300)),alt:"banner"}),a("div",{className:r("banner-right"),children:[a("button",{children:[t(R,{})," \u7CBE\u54C1\u6B4C\u5355"]}),t("h2",{children:s==null?void 0:s.name}),t("h3",{children:s==null?void 0:s.copywriter})]})]}),a("section",{className:r("guide"),children:[t(q,{context:d,functionChildren:N}),t("ul",{children:h.map(e=>t("li",{className:k({"--active":e.name===i}),onClick:()=>m(e.name),children:e.name},e.id))})]}),t("section",{className:r("card"),children:b.map(e=>a("div",{className:r("item"),children:[t(B,{className:r("img"),src:I(e.imgUrl),icon:{size:"big",hoverDisplay:!0,placement:"bottom"},onClick:()=>f(e.id),onIconClick:()=>v(e.id)}),t("p",{onClick:()=>f(e.id),children:e.name})]},e.id))}),t("footer",{className:r("footer"),children:p>0?t(K,{current:l,total:p,onChange:(e,c)=>{C(e),u(e,c)},pageSize:100,showSizeChanger:!1}):null})]})};export{le as default};
